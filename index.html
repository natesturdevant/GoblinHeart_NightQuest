<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goblinheart: Night Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Goblinheart: Night Quest</h1>
    
    <div class="game-container">
        <!-- Canvas and Message Box side-by-side -->
        <div class="game-layout">
            <canvas id="gameCanvas" width="480" height="360"></canvas>
            
            <div class="message-box" id="messageBox">
                Welcome to Goblinheart: Night Quest!
            </div>
        </div>
        
        <!-- Status bar below (full width) -->
        <div class="status-bar">
            <span>HP: <span id="playerHp">100</span>/<span id="playerMaxHp">100</span></span>
            <span>MP: <span id="playerMp">50</span>/<span id="playerMaxMp">50</span></span>
            <span>Lv: <span id="playerLevel">1</span></span>
            <span>STR: <span id="statusStrength">10</span></span>
            <span>Gold: <span id="playerGold">0</span></span>
            <span>XP: <span id="playerXp">0</span>/<span id="playerXpNext">31</span></span>
            <span class="map-indicator">Map: <span id="currentMapName">Overworld</span></span>
        </div>
        
        <!-- Controls below -->
        <div class="controls">
            <button id="exportBtn">Export Save</button>
            <button id="importBtn">Import Save</button>
            <button id="newGameBtn">New Game</button>
            <br><br>
            Arrows: Move | C: Tactical | A: Action | W: Wait | I: Inventory | M: Spells | S: Search | L: Look | F: Toggle Fog
        </div>
    </div>

    <!-- Inventory Panel -->
    <div class="inventory-panel" id="inventoryPanel">
        <div class="inventory-header">INVENTORY & EQUIPMENT</div>
        
        <div class="inventory-section">
            <h3>Stats</h3>
            <div class="inventory-items" style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; min-height: 50px;">
                <div style="color: #ff0; font-size: 9px;">STR: <span id="statAttack">10</span></div>
                <div style="color: #ff0; font-size: 9px;">VIT: <span id="statDefense">8</span></div>
                <div style="color: #ff0; font-size: 9px;">INT: <span id="statMagic">6</span></div>
                <div style="color: #ff0; font-size: 9px;">SPR: <span id="statSpirit">7</span></div>
                <div style="color: #ff0; font-size: 9px;">AGI: <span id="statAgility">5</span></div>
                <div style="color: #ff0; font-size: 9px;">LUK: <span id="statLuck">4</span></div>
            </div>
        </div>

        <div class="inventory-section">
            <h3>Items</h3>
            <div class="inventory-items" id="inventoryItems">
                <div class="slot-empty">No items</div>
            </div>
        </div>

        <div class="inventory-section">
            <h3>Equipment</h3>
            <div class="equipment-grid">
                <div class="equip-slot">
                    <span class="slot-label">WEAPON:</span>
                    <span id="weaponSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">OFFHAND:</span>
                    <span id="offhandSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">HELMET:</span>
                    <span id="helmetSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">ARMOR:</span>
                    <span id="armorSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">GLOVES:</span>
                    <span id="glovesSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">BOOTS:</span>
                    <span id="bootsSlot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">RING 1:</span>
                    <span id="ring1Slot" class="slot-empty">None</span>
                </div>
                <div class="equip-slot">
                    <span class="slot-label">RING 2:</span>
                    <span id="ring2Slot" class="slot-empty">None</span>
                </div>
            </div>
        </div>

        <div class="inventory-close">Press I to close | Arrows: Select | E: Equip | U: Use | D: Drop</div>
    </div>

    <!-- Shop Panel -->
    <div id="shopPanel" class="shop-panel">
        <div class="shop-header">
            <h2>MERCHANT</h2>
            <div>Gold: <span id="shopGold">0</span></div>
        </div>
        
        <div class="shop-mode-buttons">
            <button id="buyModeBtn" class="shop-mode-btn active">BUY</button>
<button id="sellModeBtn" class="shop-mode-btn">SELL</button>
        </div>
        
        <div id="shopItems" class="shop-items">
            <!-- Items will be added here by JavaScript -->
        </div>
        
        <div class="shop-footer">
            Arrow Keys: Select | Enter: Confirm | Escape: Close
        </div>
    </div>

    <!-- Spell Panel -->
    <div id="spellPanel" class="spell-panel">
        <div class="spell-header">
            <h2>SPELLS</h2>
            <div>MP: <span id="spellCurrentMp">0</span> / <span id="spellMaxMp">0</span></div>
        </div>
        
        <div id="spellList" class="spell-list">
            <!-- Spells will be added here by JavaScript -->
        </div>
        
        <div class="spell-footer">
            Arrow Keys: Select | Enter/C: Cast | Escape/M: Close
        </div>
    </div>

    <!-- JavaScript -->
    <script src="data.js?v=3"></script>
    <script src="equipment.js"></script>
    <script src="game.js?v=3"></script>
    
    <script>
        // Start the game after loading LDtk
        initializeGameWithLDtk();
    </script>

</body>
</html>